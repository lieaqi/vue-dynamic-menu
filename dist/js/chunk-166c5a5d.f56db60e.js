(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-166c5a5d"],{"0997":function(t,e,a){},"0a49":function(t,e,a){var n=a("9b43"),i=a("626a"),o=a("4bf8"),r=a("9def"),s=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,d=4==t,u=6==t,p=5==t||u,m=e||s;return function(e,s,f){for(var h,g,v=o(e),b=i(v),y=n(s,f,3),C=r(b.length),x=0,w=a?m(e,C):l?m(e,0):void 0;C>x;x++)if((p||x in b)&&(h=b[x],g=y(h,x,v),t))if(a)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return h;case 6:return x;case 2:w.push(h)}else if(d)return!1;return u?-1:c||d?d:w}}},1169:function(t,e,a){var n=a("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"11e9":function(t,e,a){var n=a("52a7"),i=a("4630"),o=a("6821"),r=a("6a99"),s=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=o(t),e=r(e,!0),l)try{return c(t,e)}catch(a){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},"32a6":function(t,e,a){var n=a("241e"),i=a("c3a1");a("ce7e")("keys",function(){return function(t){return i(n(t))}})},3350:function(t,e,a){"use strict";var n=a("6ceb"),i=a.n(n);i.a},3712:function(t,e,a){},"4d4f":function(t,e,a){},5933:function(t,e,a){},"5b61":function(t,e,a){(function(t,a){a(e)})(0,function(t){"use strict";(function(){if("undefined"!==typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a=" .timeline { padding: 0; position: relative; list-style: none; font-family: PingFangSC-light, Avenir, Helvetica, Arial, Hiragino Sans GB, Microsoft YaHei, sans-serif; -webkit-font-smoothing: antialiased; margin: 10px 20px; } .timeline:after { position: absolute; content: ''; left: 0; top: 0; width: 1px; height: 100%; background-color: var(--timelineTheme); } .timeline-item { position: relative; margin: 1.5em 0 0 28px; padding-bottom: 1.5em; border-bottom: 1px dotted var(--timelineTheme); } .timeline-item:last-child { border-bottom: none; } .timeline-circle { position: absolute; top: .28em; left: -34px; width: 10px; height: 10px; border-radius: 50%; border: 1px solid var(--timelineTheme); background-color: var(--timelineTheme); z-index: 1; box-sizing: content-box; } .timeline-circle.hollow { background-color: var(--timelineBg); } .timeline-title { position: relative; display: inline-block; /** * BFC inline-block 元素与其兄弟元素、子元素和父元素的外边距都不会折叠（包括其父元素和子元素） */ cursor: crosshair; margin: -.15em 0 15px 28px } .timeline-title:not(:first-child) { margin-top: 28px; } .timeline-title-circle { left: -36px; top: .15em; width: 16px; height: 16px; } .timeline-others { width: 40px; height: auto; top: .2em; left: -48px; line-height: 1; padding: 2px 0; text-align: center; border: none; background-color: var(--timelineBg); } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}})();var e={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{ref:"timeline",staticClass:"timeline"},[t._t("default")],2)},staticRenderFns:[],name:"Timeline",props:{timelineTheme:{type:String,default:"#dbdde0"},timelineBg:{type:String,default:"#fff"}},mounted:function(){var t=this.$refs.timeline;t.style.setProperty("--timelineTheme",this.timelineTheme),t.style.setProperty("--timelineBg",this.timelineBg)}};(function(){if("undefined"!==typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a="";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}})();var a={name:"TimelineItemBase",props:{bgColor:{type:String,default:""},lineColor:{type:String,default:""},hollow:{type:Boolean,default:!1},fontColor:{type:String,default:"#37414a"}},data:function(){return{slotOthers:!1}},computed:{circleStyle:function(){if(this.bgColor||this.lineColor||this.hollow){var t={};return this.bgColor&&(t={"border-color":this.bgColor,"background-color":this.bgColor}),this.lineColor&&(t=Object.assign({},t,{"border-color":this.lineColor})),t}},itemStyle:function(){return{color:this.fontColor}},slotClass:function(){var t="";return this.slotOthers?t="timeline-others":this.hollow&&(t="hollow"),t}},mounted:function(){this.slotOthers=!!this.$refs.others.innerHTML}};(function(){if("undefined"!==typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a="";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}})();var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"timeline-item",style:t.itemStyle},[a("div",{ref:"others",staticClass:"timeline-circle",class:t.slotClass,style:t.circleStyle},[t._t("others")],2),t._v(" "),t._t("default")],2)},staticRenderFns:[],extends:a};(function(){if("undefined"!==typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a="";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}})();var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"timeline-title",style:t.itemStyle},[a("div",{ref:"others",staticClass:"timeline-circle timeline-title-circle",class:t.slotClass,style:t.circleStyle},[t._t("others")],2),t._v(" "),t._t("default")],2)},staticRenderFns:[],extends:a};"undefined"!==typeof window&&window.Vue&&(window.Vue.component(e.name,e),window.Vue.component(n.name,n),window.Vue.component(i.name,i)),t.Timeline=e,t.TimelineItem=n,t.TimelineTitle=i,Object.defineProperty(t,"__esModule",{value:!0})})},"5dbc":function(t,e,a){var n=a("d3f4"),i=a("8b97").set;t.exports=function(t,e,a){var o,r=e.constructor;return r!==a&&"function"==typeof r&&(o=r.prototype)!==a.prototype&&n(o)&&i&&i(t,o),t}},"5fe2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"addAgent",attrs:{title:"选择产品",visible:t.dialogVisible,width:"800px","before-close":t.handleClose,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-tabs",{model:{value:t.checkType,callback:function(e){t.checkType=e},expression:"checkType"}},[t.lists.includes("productList")?a("el-tab-pane",{attrs:{label:"产品管理",name:"productList"}}):t._e(),t.lists.includes("mealList")?a("el-tab-pane",{attrs:{label:"套餐管理",name:"mealList"}}):t._e()],1),a("div",{staticStyle:{"max-height":"500px",overflow:"auto"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"normalTable",staticStyle:{width:"100%"},attrs:{data:t.productData,border:"","highlight-current-row":""}},["mealList"==t.checkType?a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"margin-left":"45px",width:"700px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"normalTable",staticStyle:{width:"100%"},attrs:{data:e.row.childList,border:"","highlight-current-row":""}},t._l(t.productTable,function(e){return e.checked?a("el-table-column",{key:e.prop,attrs:{label:e.label,width:e.width,"min-width":e.minWidth},scopedSlots:t._u([{key:"default",fn:function(n){return["status"==e.prop?a("span",[t._v(" "+t._s(n.row[e.prop]?"上架":"下架"))]):a("span",[t._v(" "+t._s(n.row[e.prop]))])]}}],null,!0)}):t._e()}),1)],1)]}}],null,!1,724951085)}):t._e(),t._l(t.productTable,function(e){return e.checked?a("el-table-column",{key:e.prop,attrs:{label:e.label,width:e.width,"min-width":e.minWidth},scopedSlots:t._u([{key:"default",fn:function(n){return["status"==e.prop?a("span",[t._v(" "+t._s(n.row[e.prop]?"上架":"下架"))]):a("span",[t._v(" "+t._s(n.row[e.prop]))])]}}],null,!0)}):t._e()}),a("el-table-column",{attrs:{fixed:"right",width:"60",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini",disabled:t.ifHave(e.row.productId)},on:{click:function(a){return t.checked(e.row)}}},[t._v("选择")])]}}])})],2),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.searchInfo.pageCount,"page-sizes":[10,20,30],"page-size":t.searchInfo.pageSize,layout:"total, prev, pager, next",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},i=[],o=a("f499"),r=a.n(o),s=a("bd86"),l=(a("7514"),a("3f11")),c=a("f522"),d={label:"添加产品到套餐",name:"addProductToMeal",mixins:[],components:{},props:{dialogVisible:Boolean,productList:Array,lists:{type:[Array,String],default:["productList"]}},data:function(){return{loading:!1,productTable:c["g"],productData:[],totalCount:0,searchInfo:{pageCount:1,pageSize:10,isSetMealT:!1},checkType:"productList"}},computed:{},watch:{checkType:function(t){this.searchInfo={pageCount:1,pageSize:10,isSetMealT:"mealList"==t},this.GetProductOrSetMeal()}},mounted:function(){this.GetProductOrSetMeal()},destroyed:function(){},methods:{ifHave:function(t){return Boolean(this._.find(this.productList,Object(s["a"])({productId:t},"productId",t)))},handleClose:function(){this.$emit("update:dialogVisible",!1)},checked:function(t){var e=JSON.parse(r()(t));this.$set(e,"checkType",this.checkType),this.$emit("checked",e)},GetProductOrSetMeal:function(){var t=this;this.loading=!0,l["a"].GetProductOrSetMeal(this.searchInfo).then(function(e){t.productData=e.result.items,t.totalCount=e.result.totalCount,t.loading=!1},function(){t.loading=!1})},handleCurrentChange:function(t){this.searchInfo.pageCount=t,this.GetProductOrSetMeal()},handleSizeChange:function(t){this.searchInfo.pageSize=t,this.GetProductOrSetMeal()}}},u=d,p=(a("3350"),a("2877")),m=Object(p["a"])(u,n,i,!1,null,"7225bdf3",null);e["a"]=m.exports},"6a72":function(t,e,a){},"6ceb":function(t,e,a){},7514:function(t,e,a){"use strict";var n=a("5ca1"),i=a("0a49")(5),o="find",r=!0;o in[]&&Array(1)[o](function(){r=!1}),n(n.P+n.F*r,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},"7ab7":function(t,e,a){"use strict";var n=a("5933"),i=a.n(n);i.a},"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,r="name";r in i||a("9e1e")&&n(i,r,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"838f":function(t,e,a){"use strict";a("96cf");var n=a("3b8d"),i=a("d225"),o=a("b0b4"),r=a("795b"),s=a.n(r),l=new s.a(function(t,e){t()}),c={remoteUrl:""},d=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"GetTenantDetail",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/GetTenantDetail"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"GetTenantList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/GetTenantList"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"GetGrade",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/GetGrade"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"CreateTenant",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/CreateTenant"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"UpdateTenant",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/UpdateTenant"),t.next=3,l.put(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"GetToUpDetailList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/GetToUpDetailList"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"TopUp",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/TopUp"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"GetAmount",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/GetAmount"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"UpdateTenantIsCanUpdateVersion",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(c.remoteUrl,"/api/services/app/Tenant/UpdateTenantIsCanUpdateVersion"),t.next=3,l.post(a,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e["a"]=new d},8686:function(t,e,a){},"8aae":function(t,e,a){a("32a6"),t.exports=a("584a").Object.keys},"8b97":function(t,e,a){var n=a("d3f4"),i=a("cb7c"),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,a){return o(t,a),e?t.__proto__=a:n(t,a),t}}({},!1):void 0),check:o}},"8d27":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"crm-section"},[a("header",{staticClass:"customer-header"},[a("div",{staticClass:"c-flex"},[a("div",{staticClass:"flex-1"},[a("span",[t._v("公司名称")]),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.GetCustomer(1)}},model:{value:t.searchInfo.companyName,callback:function(e){t.$set(t.searchInfo,"companyName",e)},expression:"searchInfo.companyName"}}),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.GetCustomer(1)}}},[t._v("搜索")])],1),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.openDialog("","addCustomerDialog")}}},[t._v("新增客户")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.customerData,border:"","highlight-current-row":""}},[t._l(t.customerTable,function(e){return e.checked&&e.prop!=(t.tenant?"agmentName":"userName")?a("el-table-column",{key:e.prop,attrs:{label:e.label,width:e.width,"min-width":e.minWidth},scopedSlots:t._u([{key:"default",fn:function(n){return[a("span",[t._v(" "+t._s(n.row[e.prop]))])]}}],null,!0)}):t._e()}),a("el-table-column",{attrs:{fixed:"right",width:270+60*!Boolean(t.tenant),label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.openDialog(e.row.customerId,"addCustomerDialog",e.row.tenantId)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.openDialog(e.row.customerId,"addOrderDialog")}}},[t._v("下单")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.openDialog(e.row.customerId,"customerFollowUpDialog")}}},[t._v("跟进")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.openDialog(e.row.customerId,"lookOrderDialog")}}},[t._v("查看订单")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.openDialog(e.row.customerId,"agentFlowingDialog",e.row.tenantId)}}},[t._v("查看流水")]),Boolean(t.tenant)?t._e():a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.openDialog(e.row.customerId,"transferDialog","",e.row.companyName)}}},[t._v("转移客户")])]}}])})],2),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.searchInfo.pageCount,"page-sizes":[25,50,75],"page-size":t.searchInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.addCustomerDialog?a("addCustomer",{attrs:{dialogVisible:t.addCustomerDialog,customerId:t.customerId,checkId:t.tenantId},on:{"update:dialogVisible":function(e){t.addCustomerDialog=e},"update:dialog-visible":function(e){t.addCustomerDialog=e},saveOk:function(e){return t.GetCustomer(1)}}}):t._e(),t.lookOrderDialog?a("lookOrder",{attrs:{dialogVisible:t.lookOrderDialog,customerId:t.customerId},on:{"update:dialogVisible":function(e){t.lookOrderDialog=e},"update:dialog-visible":function(e){t.lookOrderDialog=e}}}):t._e(),t.transferDialog?a("transfer",{attrs:{dialogVisible:t.transferDialog,customerId:t.customerId,customerName:t.customerName},on:{"update:dialogVisible":function(e){t.transferDialog=e},"update:dialog-visible":function(e){t.transferDialog=e}}}):t._e(),t.customerFollowUpDialog?a("customerFollowUp",{attrs:{dialogVisible:t.customerFollowUpDialog,customerId:t.customerId},on:{"update:dialogVisible":function(e){t.customerFollowUpDialog=e},"update:dialog-visible":function(e){t.customerFollowUpDialog=e}}}):t._e(),t.addOrderDialog?a("addOrder",{attrs:{dialogVisible:t.addOrderDialog,customerId:t.customerId},on:{"update:dialogVisible":function(e){t.addOrderDialog=e},"update:dialog-visible":function(e){t.addOrderDialog=e},saveOk:function(e){return t.GetCustomer(1)}}}):t._e(),t.agentFlowingDialog?a("agentFlowing",{attrs:{dialogVisible:t.agentFlowingDialog,checkId:t.tenantId,customerId:t.customerId},on:{"update:dialogVisible":function(e){t.agentFlowingDialog=e},"update:dialog-visible":function(e){t.agentFlowingDialog=e}}}):t._e()],1)},i=[],o=a("f522"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"addAgent",attrs:{title:"添加客户/修改",visible:t.dialogVisible,width:"800px","before-close":t.handleClose,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[Boolean(t.tenant)?t._e():a("div",{staticClass:"addAgent-card"},[a("div",{staticClass:"addAgent-card-type"},[t._v("选择代理商")]),a("div",{staticClass:"addAgent-card-content"},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入代理商","remote-method":t.GetTenantList,loading:t.tenantLoading,disabled:Boolean(this.customerId)},model:{value:t.form.tenantId,callback:function(e){t.$set(t.form,"tenantId",e)},expression:"form.tenantId"}},t._l(t.tenantList,function(t){return a("el-option",{key:t.id,attrs:{label:t.tenancyName,value:t.id}})}),1)],1)]),a("div",{staticClass:"c-flex"},[a("div",{staticClass:"addAgent-card",staticStyle:{"margin-right":"20px",flex:"0 0 243px"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("公司名称")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:t.form.companyName,callback:function(e){t.$set(t.form,"companyName",e)},expression:"form.companyName"}})],1)]),a("div",{staticClass:"addAgent-card",staticStyle:{flex:"2"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("行业分类")]),a("el-select",{staticStyle:{"margin-left":"15px",width:"400px"},attrs:{placeholder:"请选择行业分类"},model:{value:t.form.tradeId,callback:function(e){t.$set(t.form,"tradeId",e)},expression:"form.tradeId"}},t._l(t.dictionary,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)]),a("div",{staticClass:"c-flex"},[a("div",{staticClass:"addAgent-card flex-1",staticStyle:{"margin-right":"20px"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("联系人")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1)]),a("div",{staticClass:"addAgent-card flex-1",staticStyle:{"margin-right":"20px"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("联系电话")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.form.phoneNumber,callback:function(e){t.$set(t.form,"phoneNumber",e)},expression:"form.phoneNumber"}})],1)]),a("div",{staticClass:"addAgent-card flex-1"},[a("div",{staticClass:"addAgent-card-type"},[t._v("邮箱")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入邮箱",type:"email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)])]),a("div",{staticClass:"c-flex"},[a("div",{staticClass:"addAgent-card flex-1",staticStyle:{"margin-right":"20px"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("法人")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入法人"},model:{value:t.form.legalPerson,callback:function(e){t.$set(t.form,"legalPerson",e)},expression:"form.legalPerson"}})],1)]),a("div",{staticClass:"addAgent-card flex-1",staticStyle:{"margin-right":"20px"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("法人电话")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入法人电话"},model:{value:t.form.legalPersonNumber,callback:function(e){t.$set(t.form,"legalPersonNumber",e)},expression:"form.legalPersonNumber"}})],1)]),a("div",{staticClass:"addAgent-card flex-1"},[a("div",{staticClass:"addAgent-card-type"},[t._v("对公账户")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入对公账户"},model:{value:t.form.corporateAccount,callback:function(e){t.$set(t.form,"corporateAccount",e)},expression:"form.corporateAccount"}})],1)])]),a("div",{staticClass:"c-flex"},[a("div",{staticClass:"addAgent-card flex-1 addCustomer-card-size",staticStyle:{"margin-right":"20px"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("营业执照")]),a("div",{staticClass:"addAgent-card-content"},[a("div",{staticClass:"crm-upload"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.setBusinessLicense0}},[t.form.businessLicense[0]?a("img",{staticClass:"avatar",attrs:{src:t.form.businessLicense[0]}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.setBusinessLicense1}},[t.form.businessLicense[1]?a("img",{staticClass:"avatar",attrs:{src:t.form.businessLicense[1]}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{staticClass:"crm-upload",staticStyle:{"margin-top":"-10px"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setBusinessLicense0({result:""})}}},[t._v("删除")]),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setBusinessLicense1({result:""})}}},[t._v("删除")])],1)])]),a("div",{staticClass:"addAgent-card flex-1 addCustomer-card-size",staticStyle:{height:"378px"}},[a("div",{staticClass:"addAgent-card-type"},[t._v("法人身份证")]),a("div",{staticClass:"crm-upload"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.setcorporatIdentityCard0}},[t.form.corporatIdentityCard[0]?a("img",{staticClass:"avatar",attrs:{src:t.form.corporatIdentityCard[0]}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.setcorporatIdentityCard1}},[t.form.corporatIdentityCard[1]?a("img",{staticClass:"avatar",attrs:{src:t.form.corporatIdentityCard[1]}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{staticClass:"crm-upload",staticStyle:{"margin-top":"45px"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setcorporatIdentityCard0({result:""})}}},[t._v("删除")]),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setcorporatIdentityCard1({result:""})}}},[t._v("删除")])],1)])]),Boolean(this.customerId)?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.form.productList,border:"","highlight-current-row":"","max-height":"400px"}},[a("el-table-column",{attrs:{prop:"productName",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"productPrice",label:"产品价格"}}),a("el-table-column",{attrs:{prop:"productNum",label:"数量"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.Upgrade(e.row.productId)}}},[t._v("升级")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.Renew(e.row.productId)}}},[t._v("续费")]),t.tenant?t._e():a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.updateProduct(e.row.productId)}}},[t._v("修改")])]}}],null,!1,54569361)})],1):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saveLoading,expression:"saveLoading"}],attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1),t.updateProductDialog?a("updateProduct",{attrs:{dialogVisible:t.updateProductDialog,productId:t.productId,customerId:t.customerId},on:{"update:dialogVisible":function(e){t.updateProductDialog=e},"update:dialog-visible":function(e){t.updateProductDialog=e},saveOk:t.GetCusotmerDetail}}):t._e()],1)},s=[],l=a("a4bb"),c=a.n(l),d=(a("7f7f"),a("7514"),a("c5f6"),a("3f11")),u=a("838f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"addAgent",attrs:{title:"客户下单",visible:t.dialogVisible,width:"550px","before-close":t.handleClose,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("section",[a("div",{staticClass:"addAgent-card"},[a("div",{staticClass:"addAgent-card-type"},[t._v("时间区间")]),a("div",{staticClass:"addAgent-card-content"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),a("span",{staticStyle:{margin:"0 5px"}},[t._v("至")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)]),a("div",{staticClass:"addAgent-card"},[a("div",{staticClass:"addAgent-card-type"},[t._v("产品数量")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入数量",type:"number"},model:{value:t.productNum,callback:function(e){t.productNum=e},expression:"productNum"}})],1)])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saveLoading,expression:"saveLoading"}],attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)])},m=[],f={label:"管理员修改客户产品",name:"updateProduct",mixins:[],components:{},props:{dialogVisible:Boolean,customerId:[String,Number],productId:[String,Number]},data:function(){return{saveLoading:!1,startTime:"",endTime:"",productNum:""}},computed:{},watch:{},created:function(){},mounted:function(){},destroyed:function(){},methods:{handleClose:function(){this.$emit("update:dialogVisible",!1)},save:function(){var t=this;this.saveLoading=!0;var e={customerId:this.customerId,productId:this.productId,startTime:this.startTime,endTime:this.endTime,productNum:this.productNum};d["a"].UpdateCompanyAndProduct(e).then(function(e){t.$message.success("修改成功"),t.handleClose(),t.$emit("saveOk"),t.saveLoading=!1},function(){t.saveLoading=!1})}}},h=f,g=(a("d0cf"),a("2877")),v=Object(g["a"])(h,p,m,!1,null,"be6be792",null),b=v.exports,y={},C={label:"添加客户",name:"addCustomer",mixins:[],components:{updateProduct:b},props:{dialogVisible:Boolean,customerId:[String,Number],checkId:[String,Number]},data:function(){return{form:{phoneNumber:"",companyName:"",email:"",contactName:"",tradeId:"",id:"",legalPerson:"",legalPersonNumber:"",corporateAccount:"",businessLicense:["",""],corporatIdentityCard:["",""],productList:[]},imageUrl:"",dictionary:[],saveLoading:!1,loading:!1,uploadUrl:"",tenant:null,tenantList:[],productId:"",updateProductDialog:!1}},computed:{},watch:{},created:function(){this.tenant=this.$store.state.session.tenant,this.uploadUrl="".concat(y.remoteUrl,"/api/services/app/Agment/UploadFile"),!this.tenant&&this.GetTenantList()},mounted:function(){this.customerId&&this.GetCusotmerDetail(this.customerId),this.Getdictionary()},destroyed:function(){},methods:{updateProduct:function(t){this.productId=t,this.updateProductDialog=!0},Upgrade:function(t){var e=this;this.$prompt("请输入升级数量","提示",{}).then(function(a){var n=a.value,i={customerId:e.customerId,productId:t,productNum:n};d["a"].UpgradePrice(i).then(function(t){e.$confirm("升级费用为:".concat(t.result),"提示",{}).then(function(){d["a"].Upgrade(i).then(function(t){e.$message.success("升级成功")})})})})},Renew:function(t){var e=this;this.$prompt("请输入续费年数","提示",{}).then(function(a){var n=a.value;if(n=Number(n),"number"!=typeof n||n<1||NaN==Number(n))e.$message.error("请输入数字且大于0");else{var i={customerId:e.customerId,productId:t,productTimeNum:n};d["a"].RenewPrice(i).then(function(t){e.$confirm("续费费用为:".concat(t.result),"费用提示",{}).then(function(){d["a"].Renew(i).then(function(t){e.$message.success("续费成功")})})})}})},GetTenantList:function(t,e){var a=this;this.tenantLoading=!0;var n={pageCount:1,pageSize:10,tenancyName:t,tenantId:e||""};u["a"].GetTenantList(n).then(function(t){a.tenantList=t.result.items,a.tenantLoading=!1},function(){a.tenantLoading=!1})},Getdictionary:function(){var t=this;d["a"].Getdictionary({}).then(function(e){t.dictionary=e.result})},save:function(){var t=this,e=this._.find(this.dictionary,{id:this.form.tradeId}),a=e?e.name:"",n=[{label:"公司名称",value:this.form.companyName},{label:"行业分类",value:a},{label:"联系电话",value:this.form.phoneNumber},{label:"联系人",value:this.form.contactName},{label:"邮箱",value:this.form.email},{label:"法人",value:this.form.legalPerson},{label:"法人电话",value:this.form.legalPersonNumber},{label:"对公账户",value:this.form.corporateAccount},{label:"营业执照1",value:this.form.businessLicense[0]},{label:"营业执照2",value:this.form.businessLicense[1]},{label:"法人身份证1",value:this.form.corporatIdentityCard[0]},{label:"法人身份证2",value:this.form.corporatIdentityCard[1]}];this.getConfirmHtml(n).then(function(e){t.saveLoading=!0;var a=t.form.id?"UpdateCustomer":"AddCustomer",n=t.form.id?"修改成功":"添加成功";d["a"][a](t.form).then(function(e){t.saveLoading=!1,t.$emit("saveOk"),t.handleClose(),t.$message.success(n)},function(){t.saveLoading=!1})})},handleClose:function(){this.$emit("update:dialogVisible",!1)},setBusinessLicense0:function(t){var e=[t.result,this.form.businessLicense[1]];this.$set(this.form,"businessLicense",e)},setBusinessLicense1:function(t){console.log(t);var e=[this.form.businessLicense[0],t.result];this.$set(this.form,"businessLicense",e)},setcorporatIdentityCard0:function(t){var e=[t.result,this.form.corporatIdentityCard[1]];this.$set(this.form,"corporatIdentityCard",e)},setcorporatIdentityCard1:function(t){var e=[this.form.corporatIdentityCard[0],t.result];this.$set(this.form,"corporatIdentityCard",e)},handleAvatarSuccess:function(t,e,a){console.log(t,e,a)},GetCusotmerDetail:function(){var t=this;this.loading=!0,d["a"].GetCusotmerDetail({id:this.customerId}).then(function(e){c()(t.form).map(function(a){t.form[a]=e.result[a]}),t.loading=!1,!t.tenant&&t.GetTenantList("",t.form.tenantId)},function(){t.loading=!1})}}},x=C,w=(a("f040"),Object(g["a"])(x,r,s,!1,null,"0d52c695",null)),I=w.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"agentProduct",attrs:{title:"查看订单",visible:t.dialogVisible,width:"1100px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("header",{staticStyle:{margin:"10px 0 20px 0"}},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v("时间")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},on:{change:function(e){return t.GetOrder(1)}},model:{value:t.searchInfo.startTime,callback:function(e){t.$set(t.searchInfo,"startTime",e)},expression:"searchInfo.startTime"}}),a("span",{staticStyle:{margin:"0 5px"}},[t._v("至")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},on:{change:function(e){return t.GetOrder(1)}},model:{value:t.searchInfo.endTime,callback:function(e){t.$set(t.searchInfo,"endTime",e)},expression:"searchInfo.endTime"}})],1),a("section",{staticStyle:{"min-height":"400px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"normalTable",staticStyle:{width:"100%"},attrs:{data:t.orderData,border:"","highlight-current-row":""}},t._l(t.orderTable,function(e){return e.checked?a("el-table-column",{key:e.prop,attrs:{label:e.label,width:e.width,"min-width":e.minWidth},scopedSlots:t._u([{key:"default",fn:function(n){return["productList"==e.prop?a("span",[t._v(t._s(t.getProducts(n.row[e.prop])))]):a("span",[t._v(" "+t._s(n.row[e.prop]))])]}}],null,!0)}):t._e()}),1),a("div",{staticClass:"flex-center"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.searchInfo.PageIndex,"page-sizes":[10,20,30],"page-size":t.searchInfo.PageSize,layout:"total, prev, pager, next",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},_=[],T={label:"查看订单",name:"lookOrder",mixins:[],components:{},props:{dialogVisible:Boolean,customerId:[String,Number]},data:function(){return{orderTable:o["f"],orderData:[],loading:!1,searchInfo:{pageCount:1,pageSize:10,startTime:"",endTime:"",customerId:""},totalNum:10}},computed:{},watch:{},created:function(){},mounted:function(){this.GetOrder()},destroyed:function(){},methods:{getProducts:function(t){var e="";if(t)for(var a=0;a<t.length;a++){var n=t[a].productName;e+=n,a<t.length-1&&(e+=" | ")}return e},GetOrder:function(t){var e=this;this.searchInfo.customerId=this.customerId,this.searchInfo.pageCount=t||this.searchInfo.pageCount,this.loading=!0,d["a"].GetOrder(this.searchInfo).then(function(t){e.orderData=t.result.items,e.totalCount=t.result.totalCount,e.loading=!1},function(){e.loading=!1})},handleCurrentChange:function(t){this.searchInfo.PageIndex=t,this.GetOrder()},handleSizeChange:function(t){this.searchInfo.PageSize=t,this.GetOrder()},handleClose:function(){this.$emit("update:dialogVisible",!1)}}},S=T,N=(a("9272"),Object(g["a"])(S,k,_,!1,null,"52daff45",null)),L=N.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"跟进记录",visible:t.dialogVisible,width:"800px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("section",[a("header",[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.addLoading,expression:"addLoading"}],staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"small",disabled:""==t.textarea},on:{click:t.add}},[t._v("添加跟进")]),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入跟进",resize:"none"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),a("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"max-height":"300px",overflow:"auto","margin-top":"20px"},on:{scroll:function(e){return t.followScroll(e)}}},[a("timeline",t._l(t.remark,function(e,n){return a("timeline-item",{key:n,attrs:{"bg-color":"#9dd8e0"}},[a("div",{staticClass:"customerFollowUp-time"},[t._v(t._s(e.creationTime))]),a("div",{staticClass:"customerFollowUp-text"},[t._v("\n                        "+t._s(e.detail)+"\n                    ")])])}),1)],1)])])},D=[],O=a("5b61"),z={label:"添加跟进",name:"customerFollowUp",mixins:[],components:{Timeline:O["Timeline"],TimelineItem:O["TimelineItem"],TimelineTitle:O["TimelineTitle"]},props:{dialogVisible:Boolean,customerId:[String,Number]},data:function(){return{form:{level:1},textarea:"",searchInfo:{customerId:"",pageCount:1,pageSize:5},totalCount:0,remark:[],loading:!1,addLoading:!1}},computed:{},watch:{},created:function(){this.searchInfo.customerId=this.customerId,this.GetRemark()},mounted:function(){},destroyed:function(){},methods:{add:function(){var t=this,e={customerId:this.customerId,detail:this.textarea};this.addLoading=!0,d["a"].AddRemark(e).then(function(e){t.addLoading=!1,t.$message.success("添加成功"),t.textarea="",t.GetRemark()},function(){t.addLoading=!1})},followScroll:function(t){var e=t.target,a=e.clientHeight==e.scrollHeight-e.scrollTop;a&&!this.loading&&this.searchInfo.pageSize<=this.totalCount&&(this.searchInfo.pageSize+=5,this.GetRemark())},GetRemark:function(){var t=this;this.loading=!0,d["a"].GetRemark(this.searchInfo).then(function(e){t.remark=e.result.items,t.totalCount=e.result.totalCount,t.loading=!1},function(){t.loading=!1})},handleClose:function(){this.$emit("update:dialogVisible",!1)},save:function(){}}},G=z,P=(a("7ab7"),Object(g["a"])(G,A,D,!1,null,"e8c9c6ea",null)),$=P.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"addAgent",attrs:{title:"客户下单",visible:t.dialogVisible,width:"800px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("section",[a("div",{staticClass:"addAgent-card"},[a("div",{staticClass:"addAgent-card-type"},[t._v("账号余额")]),a("div",{staticClass:"addAgent-card-content"},[t._v("\n        "+t._s(t.CompanAmount)+"\n      ")])]),a("div",{staticClass:"addAgent-card"},[a("div",{staticClass:"addAgent-card-type"},[t._v("详情（备注）")]),a("div",{staticClass:"addAgent-card-content"},[a("el-input",{attrs:{placeholder:"请输入详情",type:"textarea",rows:2,resize:"none"},model:{value:t.form.orderDetail,callback:function(e){t.$set(t.form,"orderDetail",e)},expression:"form.orderDetail"}})],1)])]),a("section",[a("div",{staticClass:"c-flex",staticStyle:{margin:"10px 0"}},[a("span",{staticClass:"flex-1"},[t._v("产品")]),a("el-button",{attrs:{round:"",type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(e){t.addProductToMealDialog=!0}}},[t._v("添加")])],1),a("el-table",{staticClass:"normalTable",staticStyle:{width:"100%"},attrs:{data:t.form.orderProductList,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return["mealList"==e.row.checkType?a("div",{staticStyle:{"margin-left":"45px"}},[a("el-table",{staticClass:"normalTable",staticStyle:{width:"100%"},attrs:{data:e.row.childList,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"productName",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"productPrice",label:"单价"}})],1)],1):a("div",{staticClass:"addOrder-mess"},[t._v("\n            只有套餐有产品列表\n          ")])]}}])}),a("el-table-column",{attrs:{prop:"productName",label:"产品名称/套餐"}}),a("el-table-column",{attrs:{prop:"productPrice",label:"单价"}}),a("el-table-column",{attrs:{label:"产品数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,"controls-position":"right"},model:{value:e.row.productNum,callback:function(a){t.$set(e.row,"productNum",a)},expression:"scope.row.productNum"}})]}}])}),a("el-table-column",{attrs:{label:"产品年数"},scopedSlots:t._u([{key:"default",fn:function(e){return["productList"==e.row.checkType?a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,"controls-position":"right"},model:{value:e.row.productTimeNum,callback:function(a){t.$set(e.row,"productTimeNum",a)},expression:"scope.row.productTimeNum"}}):a("span",[t._v("----")])]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saveLoading,expression:"saveLoading"}],attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1),t.addProductToMealDialog?a("addProductToMeal",{attrs:{dialogVisible:t.addProductToMealDialog,productList:t.form.orderProductList,lists:["productList","mealList"]},on:{"update:dialogVisible":function(e){t.addProductToMealDialog=e},"update:dialog-visible":function(e){t.addProductToMealDialog=e},checked:t.checked}}):t._e()],1)},U=[],F=a("5fe2"),M={label:"修改订单",name:"updateOrder",mixins:[],components:{addProductToMeal:F["a"]},props:{dialogVisible:Boolean,customerId:[String,Number]},data:function(){return{addProductToMealDialog:!1,loading:!1,customerData:[],saveLoading:!1,CompanAmount:0,form:{orderDetail:"",customerId:"",orderProductList:[]},updateOrderData:[{name:"壹起推",price:"365元/张",number:"366",price1:"233"}],searchInfo:{pageCount:1,pageSize:10,companyName:""}}},computed:{},watch:{},created:function(){this.GetCustomer(""),this.GetCompanAmount()},mounted:function(){},destroyed:function(){},methods:{GetCompanAmount:function(){var t=this;d["a"].GetCompanAmount({}).then(function(e){t.CompanAmount=e.result})},checked:function(t){this.form.orderProductList.push({productId:t.productId,productNum:1,productTimeNum:1,productPrice:t.productPrice,productName:t.productName,checkType:t.checkType,childList:t.childList}),this.addProductToMealDialog=!1},handleClose:function(){this.$emit("update:dialogVisible",!1)},GetCustomer:function(t){var e=this;this.searchInfo.companyName=t,this.loading=!0,d["a"].GetCustomer(this.searchInfo).then(function(t){e.customerData=t.result.items,e.loading=!1},function(){e.loading=!1})},save:function(){var t=this,e=[{label:"详情(备注)",value:this.form.orderDetail},{label:"产品",value:this.form.orderProductList.map(function(t){return t.productName}).join(" | ")}];this.getConfirmHtml(e).then(function(e){t.saveLoading=!0,t.form.customerId=t.customerId,d["a"].AddOrder(t.form).then(function(e){t.$message.success("添加成功"),t.saveLoading=!1,t.handleClose(),t.$emit("saveOk")},function(){t.saveLoading=!1})})}}},E=M,R=(a("9f85"),Object(g["a"])(E,V,U,!1,null,"3c1ba725",null)),j=R.exports,B=a("a98a"),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"addAgent",attrs:{title:"转移客户",visible:t.dialogVisible,width:"900px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("header",{staticClass:"agent-header",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"c-flex",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.GetTenantList(1)}}},[a("div",{staticClass:"flex-1"},[a("span",[t._v("公司名称")]),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入公司名称"},model:{value:t.searchInfo.tenancyName,callback:function(e){t.$set(t.searchInfo,"tenancyName",e)},expression:"searchInfo.tenancyName"}}),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.GetTenantList(1)}}},[t._v("搜索")])],1)])]),a("section",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"normalTable",staticStyle:{width:"100%"},attrs:{data:t.agentData,border:"","highlight-current-row":""}},[t._l(t.agentTable,function(e){return e.checked?a("el-table-column",{key:e.prop,attrs:{label:e.label,width:e.width,"min-width":e.minWidth},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n          "+t._s(a.row[e.prop])+"\n        ")]}}],null,!0)}):t._e()}),a("el-table-column",{attrs:{fixed:"right",width:"60",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.checkAgent(e.row)}}},[t._v("转移")])]}}])})],2),a("div",{staticStyle:{overflow:"auto"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.searchInfo.pageCount,"page-sizes":[10,20,30],"page-size":t.searchInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},J=[],W={label:"扣款",name:"withdrawing",mixins:[],components:{},props:{dialogVisible:Boolean,customerId:[String,Number],customerName:[String]},data:function(){return{loading:!1,agentTable:o["c"],agentData:[],totalCount:0,searchInfo:{pageCount:1,pageSize:10,tenancyName:""}}},computed:{},watch:{},created:function(){this.GetTenantList()},mounted:function(){},destroyed:function(){},methods:{checkAgent:function(t){var e=this,a="<span>是否将客户 <strong>".concat(this.customerName,"</strong> 转移到代理商 <strong>").concat(t.tenancyName,"</strong> 下</span>");this.$alert(a,"转移提示",{dangerouslyUseHTMLString:!0}).then(function(){e.loading=!0,d["a"].TransferCustomer({customerId:e.customerId,tenantId:t.id}).then(function(t){e.$message({type:"success",message:"转移成功!"}),e.GetTenantList(0),e.loading=!1},function(){e.loading=!1})})},handleClose:function(){this.$emit("update:dialogVisible",!1)},GetTenantList:function(t){var e=this;this.loading=!0,this.searchInfo.pageCount=t||this.searchInfo.pageCount,u["a"].GetTenantList(this.searchInfo).then(function(t){e.agentData=t.result.items,e.totalCount=t.result.totalCount,e.loading=!1},function(){e.loading=!1})},handleCurrentChange:function(t){this.searchInfo.pageCount=t,this.GetTenantList()},handleSizeChange:function(t){this.searchInfo.pageSize=t,this.GetTenantList()}}},Y=W,X=(a("fc93"),Object(g["a"])(Y,H,J,!1,null,"2f161993",null)),q=X.exports,K={label:"客户管理",name:"Customer",mixins:[],components:{addCustomer:I,lookOrder:L,customerFollowUp:$,addOrder:j,agentFlowing:B["a"],transfer:q},props:{},data:function(){return{customerId:"",customerName:"",tenantId:"",loading:!1,addCustomerDialog:!1,lookOrderDialog:!1,customerFollowUpDialog:!1,addOrderDialog:!1,agentFlowingDialog:!1,transferDialog:!1,customerTable:o["d"],customerData:[],totalCount:0,tenant:null,searchInfo:{pageCount:1,pageSize:25,companyName:""}}},computed:{},watch:{},created:function(){this.tenant=this.$store.state.session.tenant},mounted:function(){this.GetCustomer()},destroyed:function(){},methods:{openDialog:function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.customerId=t||"",this.tenantId=a||"",this[e]=!0,console.log(n),this.customerName=n},GetCustomer:function(t){var e=this;this.loading=!0,this.searchInfo.pageCount=t||this.searchInfo.pageCount,d["a"].GetCustomer(this.searchInfo).then(function(t){e.customerData=t.result.items,e.totalCount=t.result.totalCount,e.loading=!1},function(){e.loading=!1})},deleteCustomer:function(){var t=this;this.$confirm("是否删除此客户?","提示",{}).then(function(){t.$message({type:"success",message:"删除成功!"})})},upProduct:function(){this.$message({type:"success",message:"上架成功!"})},downProduct:function(){this.$message({type:"success",message:"下架成功!"})},handleCurrentChange:function(t){this.searchInfo.pageCount=t,this.GetCustomer()},handleSizeChange:function(t){this.searchInfo.pageSize=t,this.GetCustomer()}}},Q=K,Z=(a("d58c"),Object(g["a"])(Q,n,i,!1,null,"52c217cd",null));e["default"]=Z.exports},"8fb2":function(t,e,a){"use strict";var n=a("6a72"),i=a.n(n);i.a},9093:function(t,e,a){var n=a("ce10"),i=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},9272:function(t,e,a){"use strict";var n=a("8686"),i=a.n(n);i.a},"9f85":function(t,e,a){"use strict";var n=a("0997"),i=a.n(n);i.a},a21f:function(t,e,a){var n=a("584a"),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},a4bb:function(t,e,a){t.exports=a("8aae")},a98a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"agentProduct",attrs:{title:"流水订单",visible:t.dialogVisible,width:"1100px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("header",{staticStyle:{margin:"10px 0 20px 0"}},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v("时间")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},on:{change:function(e){return t.GetCapitalaccount(1)}},model:{value:t.searchInfo.startTime,callback:function(e){t.$set(t.searchInfo,"startTime",e)},expression:"searchInfo.startTime"}}),a("span",{staticStyle:{margin:"0 5px"}},[t._v("至")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},on:{change:function(e){return t.GetCapitalaccount(1)}},model:{value:t.searchInfo.endTime,callback:function(e){t.$set(t.searchInfo,"endTime",e)},expression:"searchInfo.endTime"}})],1),a("section",{staticStyle:{"min-height":"400px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"normalTable",staticStyle:{width:"100%"},attrs:{data:t.agentFlowingData,border:"","highlight-current-row":""}},t._l(t.agentFlowingTable,function(e){return e.checked?a("el-table-column",{key:e.prop,attrs:{label:e.label,width:e.width,"min-width":e.minWidth},scopedSlots:t._u([{key:"default",fn:function(n){return["productList"==e.prop?a("span",[t._v(t._s(t.getProducts(n.row[e.prop])))]):a("span",[t._v(" "+t._s(n.row[e.prop]))])]}}],null,!0)}):t._e()}),1),a("div",{staticClass:"flex-center"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.searchInfo.pageCount,"page-sizes":[10,20,30],"page-size":t.searchInfo.pageSize,layout:"total, prev, pager, next",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},i=[],o=(a("c5f6"),a("f522")),r=a("3f11"),s={label:"代理流水",name:"agentFlowing",mixins:[],components:{},props:{dialogVisible:Boolean,checkId:[String,Number],customerId:[String,Number]},data:function(){return{agentFlowingTable:o["b"],agentFlowingData:[],loading:!1,searchInfo:{pageCount:1,pageSize:10,startTime:"",endTime:"",tenantId:"",customerId:""},totalCount:10}},computed:{},watch:{},created:function(){this.searchInfo.tenantId=this.checkId,this.customerId&&(this.searchInfo.customerId=this.customerId),this.GetCapitalaccount()},mounted:function(){},destroyed:function(){},methods:{GetCapitalaccount:function(t){var e=this;this.loading=!0,this.searchInfo.pageCount=t||this.searchInfo.pageCount,r["a"].GetCapitalaccount(this.searchInfo).then(function(t){e.agentFlowingData=t.result.items,e.totalCount=t.result.totalCount,e.loading=!1},function(){e.loading=!1})},getProducts:function(t){var e="";if(t)for(var a=0;a<t.length;a++){var n=t[a].productName;e+=n,a<t.length-1&&(e+=" | ")}return e},handleCurrentChange:function(t){this.searchInfo.pageCount=t,this.GetCapitalaccount()},handleSizeChange:function(t){this.searchInfo.pageSize=t,this.GetCapitalaccount()},handleClose:function(){this.$emit("update:dialogVisible",!1)}}},l=s,c=(a("8fb2"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,"406679a0",null);e["a"]=d.exports},aa77:function(t,e,a){var n=a("5ca1"),i=a("be13"),o=a("79e5"),r=a("fdef"),s="["+r+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(t,e,a){var i={},s=o(function(){return!!r[t]()||l[t]()!=l}),c=i[t]=s?e(p):r[t];a&&(i[a]=c),n(n.P+n.F*s,"String",i)},p=u.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},c5f6:function(t,e,a){"use strict";var n=a("7726"),i=a("69a8"),o=a("2d95"),r=a("5dbc"),s=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,u=a("86cc").f,p=a("aa77").trim,m="Number",f=n[m],h=f,g=f.prototype,v=o(a("2aeb")(g))==m,b="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():p(e,3);var a,n,i,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var r,l=e.slice(2),c=0,d=l.length;c<d;c++)if(r=l.charCodeAt(c),r<48||r>i)return NaN;return parseInt(l,n)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(v?l(function(){g.valueOf.call(a)}):o(a)!=m)?r(new h(y(e)),a,f):y(e)};for(var C,x=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(h,C=x[w])&&!i(f,C)&&u(f,C,d(h,C));f.prototype=g,g.constructor=f,a("2aba")(n,m,f)}},cd1c:function(t,e,a){var n=a("e853");t.exports=function(t,e){return new(n(t))(e)}},ce7e:function(t,e,a){var n=a("63b6"),i=a("584a"),o=a("294c");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],r={};r[t]=e(a),n(n.S+n.F*o(function(){a(1)}),"Object",r)}},d0cf:function(t,e,a){"use strict";var n=a("f789"),i=a.n(n);i.a},d58c:function(t,e,a){"use strict";var n=a("f8cc"),i=a.n(n);i.a},e853:function(t,e,a){var n=a("d3f4"),i=a("1169"),o=a("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},f040:function(t,e,a){"use strict";var n=a("3712"),i=a.n(n);i.a},f499:function(t,e,a){t.exports=a("a21f")},f789:function(t,e,a){},f8cc:function(t,e,a){},fc93:function(t,e,a){"use strict";var n=a("4d4f"),i=a.n(n);i.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-166c5a5d.f56db60e.js.map