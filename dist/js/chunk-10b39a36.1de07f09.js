(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10b39a36"],{"11e9":function(e,t,r){var a=r("52a7"),o=r("4630"),n=r("6821"),i=r("6a99"),s=r("69a8"),l=r("c69a"),c=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?c:function(e,t){if(e=n(e),t=i(t,!0),l)try{return c(e,t)}catch(r){}if(s(e,t))return o(!a.f.call(e,t),e[t])}},"32a6":function(e,t,r){var a=r("241e"),o=r("c3a1");r("ce7e")("keys",function(){return function(e){return o(a(e))}})},"5dbc":function(e,t,r){var a=r("d3f4"),o=r("8b97").set;e.exports=function(e,t,r){var n,i=t.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&a(n)&&o&&o(e,n),e}},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},"8b97":function(e,t,r){var a=r("d3f4"),o=r("cb7c"),n=function(e,t){if(o(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,r){return n(e,r),t?e.__proto__=r:a(e,r),e}}({},!1):void 0),check:n}},9093:function(e,t,r){var a=r("ce10"),o=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,o)}},9355:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openDialog("addOrUpdateRoleDiglog")}}},[e._v("新增角色")])],1),r("div",{staticClass:"dividing-line m-bottom-20"}),r("div",{staticClass:"c-flex flex-1"},[r("div",{staticClass:"flex-1"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.roleManagementData,border:"","highlight-current-row":""},on:{"current-change":e.checkRow}},[e._l(e.roleManagementTable,function(t){return t.checked?r("el-table-column",{key:t.prop,attrs:{label:t.label,width:t.width,"min-width":t.minWidth},scopedSlots:e._u([{key:"default",fn:function(a){return["TelPhone"==t.prop?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openDialog("addOrUpdateRoleDiglog",a.row.Id)}}},[e._v(e._s(a.row.TelPhone))]):"Activate"==t.prop?r("span",[e._v(e._s(a.row[t.prop]?"是":"否"))]):r("span",[e._v(e._s(a.row[t.prop]))])]}}],null,!0)}):e._e()}),r("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.UpdateUserPassWord(t.row)}}},[e._v("修改密码")])]}}])})],2),r("div",{staticClass:"margin-10-0 center"},[r("el-pagination",{attrs:{"current-page":e.searchInfo.PageIndex,"page-sizes":[10,20,30],"page-size":e.searchInfo.PageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.TotalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("div",{staticClass:"margin-0-20",staticStyle:{width:"1px","background-color":"whitesmoke"}}),r("div",{staticClass:"flex-1"},[r("h3",[e._v("当前用户: "+e._s(e.currentRow.TelPhone||"请选择")+"\n      ")]),r("div",{staticClass:"dividing-line m-bottom-20"}),r("el-tree",{attrs:{data:e.trees,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"check-strictly":!0,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,o=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",{staticClass:"flex-1"},[e._v(e._s(a.label)),o.IsHidden?r("span",{staticClass:"menu-hidden"},[e._v("隐")]):e._e()]),r("el-switch",{staticClass:"mini-switch",attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.setUserMenu(t,o)}},model:{value:o.IsHave,callback:function(t){e.$set(o,"IsHave",t)},expression:"data.IsHave"}})],1)}}])})],1)]),e.addOrUpdateRoleDiglog?r("addOrUpdateRole",{attrs:{dialogVisible:e.addOrUpdateRoleDiglog,checkId:e.checkId},on:{"update:dialogVisible":function(t){e.addOrUpdateRoleDiglog=t},"update:dialog-visible":function(t){e.addOrUpdateRoleDiglog=t},saveClose:function(t){return e.GetUser()}}}):e._e()],1)},o=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialog,width:"500px","before-close":e.close,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"roleForm",staticClass:"demo-ruleForm",attrs:{model:e.roleForm,rules:e.roleRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"TelPhone"}},[r("el-input",{attrs:{name:"roleTelPhone","auto-complete":"new-roleTelPhone"},model:{value:e.roleForm.TelPhone,callback:function(t){e.$set(e.roleForm,"TelPhone",t)},expression:"roleForm.TelPhone"}})],1),e.checkId?e._e():r("el-form-item",{attrs:{label:"密码",prop:"PassWord"}},[r("el-input",{attrs:{type:"password","auto-complete":"new-PassWord"},model:{value:e.roleForm.PassWord,callback:function(t){e.$set(e.roleForm,"PassWord",t)},expression:"roleForm.PassWord"}})],1),r("el-form-item",{attrs:{label:"类型",prop:"UserType"}},[r("el-radio",{attrs:{label:"Agent"},model:{value:e.roleForm.UserType,callback:function(t){e.$set(e.roleForm,"UserType",t)},expression:"roleForm.UserType"}},[e._v("代理商")]),r("el-radio",{attrs:{label:"Manager"},model:{value:e.roleForm.UserType,callback:function(t){e.$set(e.roleForm,"UserType",t)},expression:"roleForm.UserType"}},[e._v("管理员")])],1),r("el-form-item",{attrs:{label:"是否激活",prop:"Activate"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.roleForm.Activate,callback:function(t){e.$set(e.roleForm,"Activate",t)},expression:"roleForm.Activate"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.sumbit}},[e._v("确 定")])],1)],1)},i=[],s=r("a4bb"),l=r.n(s),c=(r("ac6a"),r("c5f6"),{label:"新增或修改角色",name:"dialogSave",mixins:[],components:{},props:{dialogVisible:Boolean,checkId:[String,Number]},data:function(){return{saveLoading:!1,title:"新增角色",roleForm:{Id:"",TelPhone:"",PassWord:"",UserType:"Agent",Activate:!0},roleRules:{TelPhone:[{required:!0,message:"请输入用户名",trigger:"blur"}],PassWord:[{required:!0,message:"请输入密码",trigger:"blur"}]},dialog:!1}},computed:{},watch:{},created:function(){this.title=this.checkId?"修改角色":"新增角色",this.checkId&&this.GetUserDetail(this.checkId)},mounted:function(){this.dialog=this.dialogVisible},destroyed:function(){},methods:{GetUserDetail:function(e){var t=this;this.$request.Site.GetUserDetail({Id:e}).then(function(e){l()(t.roleForm).forEach(function(r){t.roleForm[r]=e.Data[r]})})},close:function(){this.$emit("update:dialogVisible",!1)},saveClose:function(){this.close(),this.$emit("saveClose"),this.$message("".concat(this.title,"成功")),this.saveLoading=!1},sumbit:function(){var e=this;this.$refs.roleForm.validate(function(t){if(!t)return!1;var r=e.checkId?"UpdateUser":"AddUser";e.$request.Site[r](e.roleForm).then(function(t){e.saveClose()})})}}}),u=c,d=(r("94df"),r("2877")),f=Object(d["a"])(u,n,i,!1,null,"7517db68",null),p=f.exports,h={label:"角色配置",name:"menuConfig",mixins:[],components:{addOrUpdateRole:p},props:{},data:function(){return{searchInfo:{PageIndex:1,PageSize:10,Filter:[{CalculatedField:"UserType",CalculatedMethod:"Equal",CalculatedValue:"Agent"}]},loading:!1,addOrUpdateRoleDiglog:!1,roleManagementTable:[{label:"电话",width:"",minWidth:"",prop:"TelPhone",checked:!0},{label:"用户类型",width:"",minWidth:"",prop:"UserType",checked:!0},{label:"是否激活\t",width:"80px",minWidth:"",prop:"Activate",checked:!0}],roleManagementData:[],trees:[],checkId:null,currentRow:{},TotalNum:0,defaultProps:{children:"ChildList",label:"Name"}}},created:function(){this.GetUser()},mounted:function(){},methods:{UpdateUserPassWord:function(e){var t=this;this.$prompt("请输入新密码","账号:".concat(e.TelPhone),{}).then(function(r){var a=r.value;t.$request.Site.UpdateUserPassWord({PassWord:a,Id:e.Id}).then(function(e){t.$message.success("修改成功")})})},setUserMenu:function(e,t){var r=this,a=e?"AddUserAndMenu":"DeleteUserAndMenu",o=e?"绑定菜单":"解绑菜单",n={UserId:this.currentRow.Id,MenuId:t.Id};this.$request.Site[a](n).then(function(e){r.$message.success("".concat(o,"成功"))},function(r){t.IsHave=!e})},GetUser:function(){var e=this;this.$request.Site.GetUser(this.searchInfo).then(function(t){e.roleManagementData=t.Data.List,e.TotalNum=t.Data.TotalNum})},handleCurrentChange:function(e){this.searchInfo.PageIndex=e,this.GetUser()},handleSizeChange:function(e){this.searchInfo.PageIndex=1,this.searchInfo.PageSize=e,this.GetUser()},checkRow:function(e){console.log(e),this.currentRow=e,this.GetMenuTree()},openDialog:function(e,t){this.checkId=t,this[e]=!0},GetMenuTree:function(){var e=this;this.$request.Site.GetMenuTreeByUserId({Id:this.currentRow.Id}).then(function(t){e.trees=t.Data})}}},m=h,g=(r("bcfe"),Object(d["a"])(m,a,o,!1,null,"88ebab78",null));t["default"]=g.exports},"94df":function(e,t,r){"use strict";var a=r("d59f"),o=r.n(a);o.a},a4bb:function(e,t,r){e.exports=r("8aae")},a936:function(e,t,r){},aa77:function(e,t,r){var a=r("5ca1"),o=r("be13"),n=r("79e5"),i=r("fdef"),s="["+i+"]",l="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,r){var o={},s=n(function(){return!!i[e]()||l[e]()!=l}),c=o[e]=s?t(f):i[e];r&&(o[r]=c),a(a.P+a.F*s,"String",o)},f=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},ac6a:function(e,t,r){for(var a=r("cadf"),o=r("0d58"),n=r("2aba"),i=r("7726"),s=r("32e9"),l=r("84f2"),c=r("2b4c"),u=c("iterator"),d=c("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(p),m=0;m<h.length;m++){var g,v=h[m],b=p[v],I=i[v],y=I&&I.prototype;if(y&&(y[u]||s(y,u,f),y[d]||s(y,d,v),l[v]=f,b))for(g in a)y[g]||n(y,g,a[g],!0)}},bcfe:function(e,t,r){"use strict";var a=r("a936"),o=r.n(a);o.a},c5f6:function(e,t,r){"use strict";var a=r("7726"),o=r("69a8"),n=r("2d95"),i=r("5dbc"),s=r("6a99"),l=r("79e5"),c=r("9093").f,u=r("11e9").f,d=r("86cc").f,f=r("aa77").trim,p="Number",h=a[p],m=h,g=h.prototype,v=n(r("2aeb")(g))==p,b="trim"in String.prototype,I=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():f(t,3);var r,a,o,n=t.charCodeAt(0);if(43===n||45===n){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+t}for(var i,l=t.slice(2),c=0,u=l.length;c<u;c++)if(i=l.charCodeAt(c),i<48||i>o)return NaN;return parseInt(l,a)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof h&&(v?l(function(){g.valueOf.call(r)}):n(r)!=p)?i(new m(I(t)),r,h):I(t)};for(var y,T=r("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;T.length>S;S++)o(m,y=T[S])&&!o(h,y)&&d(h,y,u(m,y));h.prototype=g,g.constructor=h,r("2aba")(a,p,h)}},ce7e:function(e,t,r){var a=r("63b6"),o=r("584a"),n=r("294c");e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),a(a.S+a.F*n(function(){r(1)}),"Object",i)}},d59f:function(e,t,r){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-10b39a36.1de07f09.js.map